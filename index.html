<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>角色对决：Jiunwai vs Jenson vs Gwen</title>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            overflow: hidden;
        }
        body {
            min-height: 100vh;
            min-width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: stretch;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            overflow: hidden;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: flex-start;
            min-height: 100vh;
            width: 100vw;
            max-width: 100vw;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        header {
            margin: 0;
            padding: 16px 0 0 0;
            text-align: center;
            flex: 0 0 auto;
        }
        h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.6);
            background: linear-gradient(to right, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 2px;
        }
        .subtitle {
            font-size: 1rem;
            color: #ffcc00;
            margin-top: -5px;
        }
        .rules {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin: 0 0 10px 0;
            max-width: 600px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            font-size: 0.95rem;
            align-self: center;
            flex: 0 0 auto;
        }
        .rules h2 {
            color: #ffcc00;
            margin-bottom: 8px;
            font-size: 1.2rem;
        }
        .rules ul {
            list-style: none;
            text-align: left;
            padding: 0 10px;
            margin: 0;
        }
        .rules li {
            margin: 6px 0;
            font-size: 1rem;
            display: flex;
            align-items: center;
        }
        .rules li::before {
            content: "•";
            color: #ffcc00;
            font-size: 1.2rem;
            margin-right: 7px;
        }
        .characters-controls-row {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 48px;
            margin-bottom: 16px;
            flex: 0 0 auto;
        }
        .characters {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: stretch;
            gap: 20px;
            flex: 0 0 auto;
        }
        .character {
            width: 180px;
            min-width: 120px;
            height: 220px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 16px 8px 8px 8px;
            border: 2px solid transparent;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        .character-img {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin-bottom: 10px;
            border: 3px solid white;
            overflow: hidden;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .character-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .character-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
            width: 100%;
        }
        .character-desc {
            text-align: center;
            font-size: 1rem;
            color: #ffd700;
            margin-top: 2px;
            width: 100%;
            flex: 1 1 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .controls {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            gap: 18px;
            justify-content: flex-start;
            align-items: center;
        }
        button {
            background: linear-gradient(to right, #ff8a00, #e52e71);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 12px 32px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 3px;
            min-width: 120px;
            transition: box-shadow 0.2s;
        }
        button:hover {
            box-shadow: 0 2px 8px #e52e71;
        }
        #result-popup {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        #result-popup.flex {
            display: flex !important;
        }
        #result-popup .popup-content {
            background: #222;
            border-radius: 16px;
            padding: 32px 24px 24px 24px;
            max-width: 340px;
            width: 90vw;
            min-height: 260px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: visible;
        }
        #popup-images {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 24px;
            margin-bottom: 16px;
            height: 100px;
        }
        #popup-images img {
            display: block;
        }
        #popup-player-img, #popup-computer-img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #fff;
            object-fit: cover;
        }
        #popup-vs-img {
            width: 48px;
            height: 48px;
            margin: 0;
        }
        #popup-result-text {
            font-size: 1.2rem;
            color: #ffd700;
            margin-bottom: 12px;
            word-break: break-all;
            white-space: normal;
            line-height: 1.5;
        }
        #popup-score {
            font-size: 1rem;
            color: #fff;
            margin-bottom: 16px;
            word-break: break-all;
            white-space: normal;
            line-height: 1.5;
        }
        #restart-btn {
            background: linear-gradient(to right,#ff8a00,#e52e71);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 10px 32px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
        }
        footer {
            margin-top: 0;
            padding: 5px;
            font-size: 0.9rem;
            flex: 0 0 30px;
            text-align: center;
        }
        /* 响应式布局 */
        @media (max-width: 900px) {
            .characters-controls-row {
                gap: 16px;
            }
            .character {
                width: 28vw;
                min-width: 90px;
                max-width: 150px;
                height: 170px;
                padding: 10px 4px 4px 4px;
            }
            .character-img {
                width: 60px;
                height: 60px;
            }
            .controls button {
                font-size: 1rem;
                min-width: 90px;
                padding: 8px 16px;
            }
        }
        @media (max-width: 600px) {
            .container {
                padding: 0;
            }
            header {
                padding-top: 8px;
            }
            h1 { font-size: 1.2rem; }
            .rules { font-size: 0.8rem; padding: 6px; }
            .characters-controls-row {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            .characters {
                flex-direction: column;
                gap: 10px;
            }
            .character {
                width: 90vw;
                min-width: 60px;
                max-width: 98vw;
                height: 110px;
                padding: 6px 2px 2px 2px;
            }
            .character-img {
                width: 40px;
                height: 40px;
            }
            .character-name { font-size: 0.9rem; }
            .character-desc { font-size: 0.8rem; }
            .controls {
                flex-direction: row;
                gap: 8px;
                margin-top: 8px;
            }
            .controls button {
                font-size: 0.8rem;
                min-width: 60px;
                padding: 4px 8px;
            }
            #result-popup .popup-content {
                padding: 16px 6px 12px 6px;
                max-width: 98vw;
            }
            #popup-player-img, #popup-computer-img {
                width: 40px;
                height: 40px;
            }
            #popup-vs-img {
                width: 28px;
                height: 28px;
            }
        }
        #suspense-effect {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            z-index: 999;
            background: rgba(0,0,0,0.85);
            align-items: center;
            justify-content: center;
            animation: suspenseFadeIn 0.3s;
        }
        @keyframes suspenseFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .suspense-text {
            font-size: 2.5rem;
            color: #ffd700;
            text-shadow: 0 0 24px #e52e71, 0 0 8px #fff;
            letter-spacing: 0.2em;
            animation: suspenseFlash 1s infinite alternate;
        }
        @keyframes suspenseFlash {
            from { color: #ffd700; text-shadow: 0 0 24px #e52e71, 0 0 8px #fff; }
            to { color: #ff8a00; text-shadow: 0 0 32px #fff, 0 0 16px #e52e71; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>角色对决游戏</h1>
            <p class="subtitle">Jiunwai vs Jenson vs Gwen</p>
        </header>
        <div class="rules">
            <h2>游戏规则</h2>
            <ul>
                <li><strong>Jiunwai</strong> 可以打败 <strong>Gwen</strong></li>
                <li><strong>Gwen</strong> 可以打败 <strong>Jenson</strong></li>
                <li><strong>Jenson</strong> 可以打败 <strong>Jiunwai</strong></li>
            </ul>
        </div>
        <div class="characters-controls-row">
            <div class="characters">
                <div class="character jiunwai">
                    <div class="character-img">
                        <img id="jiunwai-img" src="jiunwai.jpg" alt="Jiunwai">
                    </div>
                    <div class="character-name">Jiunwai</div>
                    <div class="character-desc">可以压扁Gwen，但怕被Jenson扫巴掌</div>
                </div>
                <div class="character jenson">
                    <div class="character-img">
                        <img id="jenson-img" src="jenson.jpg" alt="Jenson">
                    </div>
                    <div class="character-name">Jenson</div>
                    <div class="character-desc">可以扫俊伟巴掌，但会被Gwen魅惑</div>
                </div>
                <div class="character gwen">
                    <div class="character-img">
                        <img id="gwen-img" src="gwen.jpg" alt="Gwen">
                    </div>
                    <div class="character-name">Gwen</div>
                    <div class="character-desc">可以魅惑Jenson，但会被俊伟压扁</div>
                </div>
            </div>
            <div class="controls">
                <button id="jiunwai-btn">选择俊伟</button>
                <button id="jenson-btn">选择Jenson</button>
                <button id="gwen-btn">选择Gwen</button>
            </div>
        </div>
        <!-- 弹窗结构 -->
        <div id="result-popup">
            <div class="popup-content">
                <div id="popup-images">
                    <img id="popup-player-img" src="" alt="玩家">
                    <div style="display:flex; align-items:center; justify-content:center; height:80px;">
                        <img id="popup-vs-img" src="" alt="VS">
                    </div>
                    <img id="popup-computer-img" src="" alt="电脑">
                </div>
                <div id="popup-result-text"></div>
                <div id="popup-score"></div>
                <button id="restart-btn">重新开始</button>
            </div>
        </div>
        <!-- 在弹窗结构后添加奖励弹窗 -->
        <div id="reward-popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:3000; align-items:center; justify-content:center;">
            <div style="background:rgba(255,255,255,0.95); border-radius:24px; box-shadow:0 0 40px #e52e71,0 0 80px #ffd700; padding:32px; display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative;">
                <div id="reward-effect" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;"></div>
                <img id="reward-img" src="" alt="奖励" style="width:220px; height:220px; border-radius:16px; box-shadow:0 0 32px #e52e71; z-index:2; position:relative;">
                <div style="font-size:2rem; color:#e52e71; font-weight:bold; margin-top:18px; z-index:2; position:relative;">恭喜获得彩蛋奖励！</div>
                <button id="reward-close-btn" style="margin-top:24px; background:linear-gradient(to right,#ff8a00,#e52e71);color:white;border:none;border-radius:30px;padding:10px 32px;font-size:1.1rem;font-weight:bold;cursor:pointer;z-index:2; position:relative;">关闭</button>
            </div>
        </div>
        <!-- 在奖励弹窗后添加处罚弹窗 -->
        <div id="punish-popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:3000; align-items:center; justify-content:center;">
            <div style="background:rgba(30,30,30,0.98); border-radius:24px; box-shadow:0 0 40px #333,0 0 80px #e52e71; padding:32px; display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative;">
                <div id="punish-effect" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;"></div>
                <img id="punish-img" src="" alt="处罚" style="width:220px; height:220px; border-radius:16px; box-shadow:0 0 32px #e52e71; z-index:2; position:relative;">
                <div style="font-size:2rem; color:#ffd700; font-weight:bold; margin-top:18px; z-index:2; position:relative;">你被处罚啦！</div>
                <button id="punish-close-btn" style="margin-top:24px; background:linear-gradient(to right,#333,#e52e71);color:white;border:none;border-radius:30px;padding:10px 32px;font-size:1.1rem;font-weight:bold;cursor:pointer;z-index:2; position:relative;">关闭</button>
            </div>
        </div>
        <!-- 在处罚弹窗后添加惊喜弹窗 -->
        <div id="draw-popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:4000; align-items:center; justify-content:center;">
            <div id="draw-popup-content" style="background:rgba(30,30,30,0.98); border-radius:24px; box-shadow:0 0 40px #e52e71,0 0 80px #ffd700; padding:0; display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative;">
                <video id="draw-video" src="" controls autoplay style="max-width:90vw; max-height:70vh; border-radius:16px; margin-top:0; background:#000;"></video>
                <div style="font-size:2rem; color:#ffd700; font-weight:bold; margin:18px 0 0 0; z-index:2; position:relative;">平局惊喜！</div>
                <button id="draw-close-btn" style="margin:24px 0 16px 0; background:linear-gradient(to right,#ff8a00,#e52e71);color:white;border:none;border-radius:30px;padding:10px 32px;font-size:1.1rem;font-weight:bold;cursor:pointer;z-index:2; position:relative;">关闭</button>
            </div>
        </div>
        <footer>
            <p>请选择角色开始游戏</p>
        </footer>
    </div>
    <!-- 炫酷悬念特效层 -->
    <div id="suspense-effect">
        <div class="suspense-text">正在对决...</div>
    </div>
    <!-- 音效 -->
    <audio id="audio-win" preload="auto">
      <source src="win.aac" type="audio/aac">
      <source src="win.mp3" type="audio/mpeg">
    </audio>
    <audio id="audio-lose" src="lose.aac" preload="auto"></audio>
    <audio id="audio-draw" src="draw.aac" preload="auto"></audio>
    <audio id="audio-waiting" src="waiting.aac" preload="auto"></audio>
    <script>
        // 角色数据
        const characters = {
            jiunwai: {
                name: "Jiunwai",
                image: "jiunwai.jpg",
                beats: "gwen"
            },
            jenson: {
                name: "Jenson",
                image: "jenson.jpg",
                beats: "jiunwai"
            },
            gwen: {
                name: "Gwen",
                image: "gwen.jpg",
                beats: "jenson"
            }
        };

        // 胜负消息
        const winMessages = {
            jiunwai_gwen: "俊伟成功压扁gwen",
            gwen_jenson: "gwen成功魅惑jenson",
            jenson_jiunwai: "Jenson成功扫俊伟一巴"
        };
        const drawMessage = "这把不算 因为俊伟很肥";

        // 弹窗相关元素
        const resultPopup = document.getElementById('result-popup');
        const popupPlayerImg = document.getElementById('popup-player-img');
        const popupComputerImg = document.getElementById('popup-computer-img');
        const popupVsImg = document.getElementById('popup-vs-img');
        const popupResultText = document.getElementById('popup-result-text');
        const popupScore = document.getElementById('popup-score');
        const restartBtn = document.getElementById('restart-btn');

        // VS icon
        popupVsImg.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Ctext x='6' y='38' font-size='32' fill='%23ffd700' font-family='Arial' font-weight='bold'%3EVS%3C/text%3E%3C/svg%3E";

        // 分数
        let playerScore = 0;
        let computerScore = 0;
        let drawScore = 0;

        // 音效元素
        const audioWin = document.getElementById('audio-win');
        const audioLose = document.getElementById('audio-lose');
        const audioDraw = document.getElementById('audio-draw');
        const audioWaiting = document.getElementById('audio-waiting');

        // 按钮事件绑定
        document.getElementById('jiunwai-btn').onclick = () => playGame('jiunwai');
        document.getElementById('jenson-btn').onclick = () => playGame('jenson');
        document.getElementById('gwen-btn').onclick = () => playGame('gwen');

        // 游戏主逻辑
        function playGame(playerChoice) {
            // 用户点击后立即播放等待音效（此时浏览器允许）
            audioWaiting.currentTime = 0;
            audioWaiting.play();

            suspenseEffect.style.display = "flex";
            let suspenseTexts = ["正在对决...", "双方蓄力中...", "即将揭晓...", "谁会获胜？"];
            let suspenseIndex = 0;
            const suspenseTextEl = suspenseEffect.querySelector('.suspense-text');
            let suspenseInterval = setInterval(() => {
                suspenseTextEl.textContent = suspenseTexts[suspenseIndex % suspenseTexts.length];
                suspenseIndex++;
            }, 400);

            setTimeout(() => {
                clearInterval(suspenseInterval);
                suspenseEffect.style.display = "none";
                audioWaiting.pause();
                audioWaiting.currentTime = 0;

                const player = characters[playerChoice];
                const choices = Object.keys(characters);
                const computerChoice = choices[Math.floor(Math.random() * choices.length)];
                const computer = characters[computerChoice];

                let result, resultText;
                if (playerChoice === computerChoice) {
                    result = "draw";
                    resultText = drawMessage;
                    drawScore++;
                    showResultPopup(player, computer, resultText, result, audioDraw);
                } else if (player.beats === computerChoice) {
                    result = "win";
                    resultText = winMessages[`${playerChoice}_${computerChoice}`];
                    playerScore++;
                    showResultPopup(player, computer, resultText, result, audioWin);
                } else {
                    result = "lose";
                    resultText = winMessages[`${computerChoice}_${playerChoice}`];
                    computerScore++;
                    showResultPopup(player, computer, resultText, result, audioLose);
                }
            }, 3000);
        }

        // 悬念特效元素
        const suspenseEffect = document.getElementById('suspense-effect');

        // 修正弹窗显示和隐藏逻辑
        // 奖励图片、处罚图片、惊喜视频的上一次索引
let lastRewardIdx = -1;
let lastPunishIdx = -1;
let lastDrawIdx = -1;

// 工具函数：获取与上次不同的随机索引
function getRandomIdx(arr, lastIdx) {
    if (arr.length <= 1) return 0;
    let idx;
    do {
        idx = Math.floor(Math.random() * arr.length);
    } while (idx === lastIdx);
    return idx;
}

// 修改 showResultPopup 增加避免重复逻辑
function showResultPopup(player, computer, resultText, result, audio) {
    popupPlayerImg.src = player.image;
    popupComputerImg.src = computer.image;
    popupResultText.textContent = resultText;
    popupScore.innerHTML = `玩家胜利：${playerScore} | 电脑胜利：${computerScore} | 平局：${drawScore}`;
    resultPopup.style.display = "flex";
    audio.currentTime = 0;
    audio.play();

    // 判断是否触发奖励
    if(result === "win" && playerScore > 0 && playerScore % 5 === 0) {
        setTimeout(() => {
            const idx = getRandomIdx(rewardImages, lastRewardIdx);
            lastRewardIdx = idx;
            rewardImg.src = rewardImages[idx];
            showRewardEffect();
            rewardPopup.style.display = "flex";
        }, 1200);
    }
    // 判断是否触发处罚
    if(result === "lose" && computerScore > 0 && computerScore % 5 === 0) {
        setTimeout(() => {
            const idx = getRandomIdx(punishImages, lastPunishIdx);
            lastPunishIdx = idx;
            punishImg.src = punishImages[idx];
            showPunishEffect();
            punishPopup.style.display = "flex";
        }, 1200);
    }
    // 判断是否触发惊喜
    if(result === "draw" && drawScore > 0 && drawScore % 5 === 0) {
        setTimeout(() => {
            const idx = getRandomIdx(drawVideos, lastDrawIdx);
            lastDrawIdx = idx;
            drawVideo.src = drawVideos[idx];
            drawVideo.currentTime = 0;
            drawVideo.play();
            drawPopup.style.display = "flex";
        }, 1200);
    }
}
        restartBtn.onclick = function() {
            resultPopup.style.display = "none"; // 修正为display:none
        };

        // 奖励相关
        const rewardPopup = document.getElementById('reward-popup');
        const rewardImg = document.getElementById('reward-img');
        const rewardCloseBtn = document.getElementById('reward-close-btn');
        const rewardEffect = document.getElementById('reward-effect');

        // 奖励图片列表（假设已上传到 caidan 文件夹，文件名如 caidan1.jpg, caidan2.jpg, ...）
        const rewardImages = [
            "caidan/caidan1.jpg",
            "caidan/caidan2.jpg",
            "caidan/caidan3.jpg",
            "caidan/caidan4.jpg",
            // 可继续添加
        ];

        // 彩华特效生成
        function showRewardEffect() {
            rewardEffect.innerHTML = "";
            for(let i=0; i<30; i++) {
                const star = document.createElement("div");
                star.style.position = "absolute";
                star.style.left = Math.random()*100 + "%";
                star.style.top = Math.random()*100 + "%";
                star.style.width = "18px";
                star.style.height = "18px";
                star.style.borderRadius = "50%";
                star.style.background = `radial-gradient(circle at 30% 30%, #ffd700, #e52e71 80%)`;
                star.style.opacity = Math.random()*0.7+0.3;
                star.style.filter = "blur(1px)";
                star.style.animation = `rewardStarMove 1.2s ${Math.random()}s infinite alternate`;
                rewardEffect.appendChild(star);
            }
        }
        // 动画样式
        const style = document.createElement('style');
        style.innerHTML = `
        @keyframes rewardStarMove {
            from { transform: scale(1) translateY(0);}
            to { transform: scale(1.5) translateY(-30px);}
        }`;
        document.head.appendChild(style);

        // 关闭奖励弹窗
        rewardCloseBtn.onclick = function() {
            rewardPopup.style.display = "none";
        };

        // 处罚相关
        const punishPopup = document.getElementById('punish-popup');
        const punishImg = document.getElementById('punish-img');
        const punishCloseBtn = document.getElementById('punish-close-btn');
        const punishEffect = document.getElementById('punish-effect');

        // 处罚图片列表（假设已上传到 chufa 文件夹，文件名如 chufa1.jpg, chufa2.jpg, ...）
        const punishImages = [
            "chufa/chufa1.jpg",
            "chufa/chufa2.jpg",
            "chufa/chufa3.jpg",
            "chufa/chufa4.jpg",
            "chufa/chufa5.jpg"，
            "chufa/chufa6.jpg"，
            "chufa/chufa7.jpg"，
            "chufa/chufa8.jpg"，
            "chufa/chufa9.jpg"，
            "chufa/chufa10.jpg"，
            // 可继续添加
        ];

        // 闪电打雷特效生成
        function showPunishEffect() {
            punishEffect.innerHTML = "";
            for(let i=0; i<8; i++) {
                const lightning = document.createElement("div");
                lightning.style.position = "absolute";
                lightning.style.left = Math.random()*90 + "%";
                lightning.style.top = Math.random()*80 + "%";
                lightning.style.width = "6px";
                lightning.style.height = "80px";
                lightning.style.background = "linear-gradient(to bottom, #fff 60%, #ffd700 100%)";
                lightning.style.opacity = Math.random()*0.5+0.5;
                lightning.style.borderRadius = "3px";
                lightning.style.filter = "blur(0.5px)";
                lightning.style.animation = `punishLightning 0.5s ${Math.random()}s infinite alternate`;
                punishEffect.appendChild(lightning);
            }
            for(let i=0; i<3; i++) {
                const thunder = document.createElement("div");
                thunder.style.position = "absolute";
                thunder.style.left = Math.random()*100 + "%";
                thunder.style.top = Math.random()*100 + "%";
                thunder.style.width = "60px";
                thunder.style.height = "60px";
                thunder.style.borderRadius = "50%";
                thunder.style.background = "rgba(255,255,255,0.2)";
                thunder.style.opacity = Math.random()*0.3+0.2;
                thunder.style.filter = "blur(8px)";
                thunder.style.animation = `punishThunder 0.7s ${Math.random()}s infinite alternate`;
                punishEffect.appendChild(thunder);
            }
        }
        // 动画样式
        const punishStyle = document.createElement('style');
        punishStyle.innerHTML = `
        @keyframes punishLightning {
            from { opacity: 0.2; transform: scaleY(1);}
            to { opacity: 1; transform: scaleY(1.2);}
        }
        @keyframes punishThunder {
            from { opacity: 0.2; }
            to { opacity: 0.6; }
        }`;
        document.head.appendChild(punishStyle);

        // 关闭处罚弹窗
        punishCloseBtn.onclick = function() {
            punishPopup.style.display = "none";
        };

        // 惊喜相关
        const drawPopup = document.getElementById('draw-popup');
        const drawPopupContent = document.getElementById('draw-popup-content');
        const drawVideo = document.getElementById('draw-video');
        const drawCloseBtn = document.getElementById('draw-close-btn');

        // 惊喜视频列表（假设已上传到 jingxi 文件夹，文件名如 jingxi1.mp4, jingxi2.mp4, ...）
        const drawVideos = [
            "jingxi/jingxi1.mp4",
            "jingxi/jingxi2.mp4",
            "jingxi/jingxi3.mp4",
            "jingxi/jingxi4.mp4",
            "jingxi/jingxi5.mp4",
            "jingxi/jingxi6.mp4",
            "jingxi/jingxi7.mp4",
            // 可继续添加
        ];

        // 关闭惊喜弹窗
        drawCloseBtn.onclick = function() {
            drawVideo.pause();
            drawPopup.style.display = "none";
        };
    </script>
</body>
</html>
