<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>角色对决：Jiunwai vs Jenson vs Gwen</title>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            overflow: hidden;
        }
        body {
            min-height: 100vh;
            min-width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: stretch;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            overflow: hidden;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: flex-start;
            min-height: 100vh;
            width: 100vw;
            max-width: 100vw;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        header {
            margin: 0;
            padding: 16px 0 0 0;
            text-align: center;
            flex: 0 0 auto;
        }
        h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.6);
            background: linear-gradient(to right, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 2px;
        }
        .subtitle {
            font-size: 1rem;
            color: #ffcc00;
            margin-top: -5px;
        }
        .rules {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin: 0 0 10px 0;
            max-width: 600px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            font-size: 0.95rem;
            align-self: center;
            flex: 0 0 auto;
        }
        .rules h2 {
            color: #ffcc00;
            margin-bottom: 8px;
            font-size: 1.2rem;
        }
        .rules ul {
            list-style: none;
            text-align: left;
            padding: 0 10px;
            margin: 0;
        }
        .rules li {
            margin: 6px 0;
            font-size: 1rem;
            display: flex;
            align-items: center;
        }
        .rules li::before {
            content: "•";
            color: #ffcc00;
            font-size: 1.2rem;
            margin-right: 7px;
        }
        .characters-controls-row {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 48px;
            margin-bottom: 16px;
            flex: 0 0 auto;
        }
        .characters {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: stretch;
            gap: 20px;
            flex: 0 0 auto;
        }
        .character {
            width: 180px;
            min-width: 120px;
            height: 220px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 16px 8px 8px 8px;
            border: 2px solid transparent;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        .character-img {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin-bottom: 10px;
            border: 3px solid white;
            overflow: hidden;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .character-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .character-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
            width: 100%;
        }
        .character-desc {
            text-align: center;
            font-size: 1rem;
            color: #ffd700;
            margin-top: 2px;
            width: 100%;
            flex: 1 1 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .controls {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            gap: 18px;
            justify-content: flex-start;
            align-items: center;
        }
        button {
            background: linear-gradient(to right, #ff8a00, #e52e71);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 12px 32px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 3px;
            min-width: 120px;
            transition: box-shadow 0.2s;
        }
        button:hover {
            box-shadow: 0 2px 8px #e52e71;
        }
        #result-popup {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        #result-popup .popup-content {
            background: #222;
            border-radius: 16px;
            padding: 32px 24px 24px 24px;
            max-width: 340px;
            width: 90vw;
            min-height: 260px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: visible;
        }
        #popup-images {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 24px;
            margin-bottom: 16px;
            height: 100px;
        }
        #popup-images img {
            display: block;
        }
        #popup-player-img, #popup-computer-img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #fff;
            object-fit: cover;
        }
        #popup-vs-img {
            width: 48px;
            height: 48px;
            margin: 0;
        }
        #popup-result-text {
            font-size: 1.2rem;
            color: #ffd700;
            margin-bottom: 12px;
            word-break: break-all;
            white-space: normal;
            line-height: 1.5;
        }
        #popup-score {
            font-size: 1rem;
            color: #fff;
            margin-bottom: 16px;
            word-break: break-all;
            white-space: normal;
            line-height: 1.5;
        }
        #restart-btn {
            background: linear-gradient(to right,#ff8a00,#e52e71);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 10px 32px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
        }
        footer {
            margin-top: 0;
            padding: 5px;
            font-size: 0.9rem;
            flex: 0 0 30px;
            text-align: center;
        }
        /* 响应式布局 */
        @media (max-width: 900px) {
            .characters-controls-row {
                gap: 16px;
            }
            .character {
                width: 28vw;
                min-width: 90px;
                max-width: 150px;
                height: 170px;
                padding: 10px 4px 4px 4px;
            }
            .character-img {
                width: 60px;
                height: 60px;
            }
            .controls button {
                font-size: 1rem;
                min-width: 90px;
                padding: 8px 16px;
            }
        }
        @media (max-width: 600px) {
            .container {
                padding: 0;
            }
            header {
                padding-top: 8px;
            }
            h1 { font-size: 1.2rem; }
            .rules { font-size: 0.8rem; padding: 6px; }
            .characters-controls-row {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            .characters {
                flex-direction: column;
                gap: 10px;
            }
            .character {
                width: 90vw;
                min-width: 60px;
                max-width: 98vw;
                height: 110px;
                padding: 6px 2px 2px 2px;
            }
            .character-img {
                width: 40px;
                height: 40px;
            }
            .character-name { font-size: 0.9rem; }
            .character-desc { font-size: 0.8rem; }
            .controls {
                flex-direction: row;
                gap: 8px;
                margin-top: 8px;
            }
            .controls button {
                font-size: 0.8rem;
                min-width: 60px;
                padding: 4px 8px;
            }
            #result-popup .popup-content {
                padding: 16px 6px 12px 6px;
                max-width: 98vw;
            }
            #popup-player-img, #popup-computer-img {
                width: 40px;
                height: 40px;
            }
            #popup-vs-img {
                width: 28px;
                height: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>角色对决游戏</h1>
            <p class="subtitle">Jiunwai vs Jenson vs Gwen</p>
        </header>
        <div class="rules">
            <h2>游戏规则</h2>
            <ul>
                <li><strong>Jiunwai</strong> 可以打败 <strong>Gwen</strong></li>
                <li><strong>Gwen</strong> 可以打败 <strong>Jenson</strong></li>
                <li><strong>Jenson</strong> 可以打败 <strong>Jiunwai</strong></li>
            </ul>
        </div>
        <div class="characters-controls-row">
            <div class="characters">
                <div class="character jiunwai">
                    <div class="character-img">
                        <img id="jiunwai-img" src="jiunwai.jpg" alt="Jiunwai">
                    </div>
                    <div class="character-name">Jiunwai</div>
                    <div class="character-desc">可以压扁Gwen，但怕被Jenson扫巴掌</div>
                </div>
                <div class="character jenson">
                    <div class="character-img">
                        <img id="jenson-img" src="jenson.jpg" alt="Jenson">
                    </div>
                    <div class="character-name">Jenson</div>
                    <div class="character-desc">可以扫俊伟巴掌，但会被Gwen魅惑</div>
                </div>
                <div class="character gwen">
                    <div class="character-img">
                        <img id="gwen-img" src="gwen.jpg" alt="Gwen">
                    </div>
                    <div class="character-name">Gwen</div>
                    <div class="character-desc">可以魅惑Jenson，但会被俊伟压扁</div>
                </div>
            </div>
            <div class="controls">
                <button id="jiunwai-btn">选择俊伟</button>
                <button id="jenson-btn">选择Jenson</button>
                <button id="gwen-btn">选择Gwen</button>
            </div>
        </div>
        <div id="result-popup">
            <div class="popup-content">
                <div id="popup-images">
                    <img id="popup-player-img" src="" alt="玩家">
                    <div style="display:flex; align-items:center; justify-content:center; height:80px;">
                        <img id="popup-vs-img" src="" alt="VS">
                    </div>
                    <img id="popup-computer-img" src="" alt="电脑">
                </div>
                <div id="popup-result-text"></div>
                <div id="popup-score"></div>
                <button id="restart-btn">重新开始</button>
            </div>
        </div>
        <footer>
            <p>请选择角色开始游戏</p>
        </footer>
    </div>
    <!-- 音效 -->
    <audio id="audio-win" src="win.aac" preload="auto"></audio>
    <audio id="audio-lose" src="lose.aac" preload="auto"></audio>
    <audio id="audio-draw" src="draw.aac" preload="auto"></audio>
    <script>
        // 角色数据
        const characters = {
            jiunwai: {
                name: "Jiunwai",
                image: "jiunwai.jpg",
                beats: "gwen"
            },
            jenson: {
                name: "Jenson",
                image: "jenson.jpg",
                beats: "jiunwai"
            },
            gwen: {
                name: "Gwen",
                image: "gwen.jpg",
                beats: "jenson"
            }
        };

        // 胜负消息
        const winMessages = {
            jiunwai_gwen: "俊伟成功压扁gwen",
            gwen_jenson: "gwen成功魅惑jenson",
            jenson_jiunwai: "Jenson成功扫一巴俊伟"
        };
        const drawMessage = "这把不算 因为俊伟很肥";

        // 弹窗相关元素
        const resultPopup = document.getElementById('result-popup');
        const popupPlayerImg = document.getElementById('popup-player-img');
        const popupComputerImg = document.getElementById('popup-computer-img');
        const popupVsImg = document.getElementById('popup-vs-img');
        const popupResultText = document.getElementById('popup-result-text');
        const popupScore = document.getElementById('popup-score');
        const restartBtn = document.getElementById('restart-btn');

        // VS icon
        popupVsImg.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Ctext x='6' y='38' font-size='32' fill='%23ffd700' font-family='Arial' font-weight='bold'%3EVS%3C/text%3E%3C/svg%3E";

        // 分数
        let playerScore = 0;
        let computerScore = 0;
        let drawScore = 0;

        // 音效元素
        const audioWin = document.getElementById('audio-win');
        const audioLose = document.getElementById('audio-lose');
        const audioDraw = document.getElementById('audio-draw');

        // 按钮事件绑定
        document.getElementById('jiunwai-btn').onclick = () => playGame('jiunwai');
        document.getElementById('jenson-btn').onclick = () => playGame('jenson');
        document.getElementById('gwen-btn').onclick = () => playGame('gwen');

        // 重新开始按钮
        restartBtn.onclick = function() {
            resultPopup.style.display = "none";
        };

        // 游戏主逻辑
        function playGame(playerChoice) {
            const player = characters[playerChoice];
            const choices = Object.keys(characters);
            const computerChoice = choices[Math.floor(Math.random() * choices.length)];
            const computer = characters[computerChoice];

            let result, resultText;
            if (playerChoice === computerChoice) {
                result = "draw";
                resultText = drawMessage;
                drawScore++;
                audioDraw.currentTime = 0;
                audioDraw.play();
            } else if (player.beats === computerChoice) {
                result = "win";
                resultText = winMessages[`${playerChoice}_${computerChoice}`];
                playerScore++;
                audioWin.currentTime = 0;
                audioWin.play();
            } else {
                result = "lose";
                resultText = winMessages[`${computerChoice}_${playerChoice}`];
                computerScore++;
                audioLose.currentTime = 0;
                audioLose.play();
            }

            showResultPopup(player, computer, resultText, result);
        }

        // 弹窗显示结果
        function showResultPopup(player, computer, resultText, result) {
            popupPlayerImg.src = player.image;
            popupComputerImg.src = computer.image;
            popupResultText.textContent = resultText;
            popupScore.innerHTML = `玩家胜利：${playerScore} | 电脑胜利：${computerScore} | 平局：${drawScore}`;
            resultPopup.style.display = "flex";
        }
    </script>
</body>
</html>